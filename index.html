<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Agenda de Contactos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!--Aqu√≠ estem fent servir bootstrap per no haver de fer el CSS-->
</head>

<body class="bg-light">

  <div class="container mt-5"> <!--container es pot canviar per container-fluid, que treu els marges en blanc. M √©s margin, t √©s top, b √©s bottom, etc. Els espais estan predefinits d'1 a 5.-->
    <h1 class="text-center mb-4">üìí Agenda de Contactos</h1> <!--text-center ens ho centra.-->

    <!-- FORMULARIO -->
    <div class="card mb-4 shadow"><!--card √©s una altra classe de bootstrap. Shadow nom√©s hi ha aquesta, nom√©s li pots canviar el color-->
      <div class="card-body">
        <h5 class="card-title">Contacto</h5>

        <div class="row g-3"><!--G √©s el gap, la separaci√≥ entre rows. -->
          <div class="col-12 col-md-6"> <!--El bootstrap, les columnes les separa en 12 per defecte. Md √©s tablet, potser medium. Hi ha tb small i large. El 6 ens diu quantes de les 12 agafem. Per a m√≤bil seria col-sx-12, per exemple-->
            <input type="text" id="nombre" class="form-control" placeholder="Nombre">
          </div>
          <div class="col-12 col-md-6">
            <input type="text" id="telefono" class="form-control" placeholder="Tel√©fono">
          </div>
          <div class="col-12 col-md-6">
            <input type="email" id="email" class="form-control" placeholder="Email">
          </div>
          <div class="col-12 col-md-6">
            <input type="text" id="empresa" class="form-control" placeholder="Empresa">
          </div>
        </div>

        <div class="mt-3 d-flex gap-2 flex-wrap"> <!--d-flex √©s el display-flex.-->
          <button class="btn btn-primary" id="push" onclick="agregarContacto()">A√±adir (push)</button>
          <button class="btn btn-success" onclick="agregarUrgente()">A√±adir urgente (unshift)</button>
          <button class="btn btn-warning" onclick="deshacerUltimo()">Deshacer √∫ltimo (pop)</button>
          <button class="btn btn-secondary" onclick="atenderPrimero()">Atender primero (shift)</button>
        </div>
      </div>
    </div>

    <!-- TABLA -->
    <div class="card shadow">
      <div class="card-body">
        <h5 class="card-title">Listado</h5>

        <table class="table table-striped table-hover"> 
          <thead class="table-dark">
            <tr>
              <th>Nombre</th>
              <th>Tel√©fono</th>
              <th>Email</th>
              <th>Empresa</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaContactos"></tbody><!--Aqu√≠ construirem la taula de forma din√†mica (JS)-->
        </table>
      </div>
    </div>
  </div>

  <!-- <script src="agenda.js"></script>-->
  <script>
    //Array de objetos (Base de datos)
const agenda = [
    {
        id: 1,
        nombre: "Ana L√≥pez",
        telefono: "600123123",
        email: "ana@mail.com",
        empresa: "TechSoft"
    },
    {
        id: 2,
        nombre: "Carlos P√©rez",
        telefono: "699456456",
        email: "carlos@mail.com",
        empresa: "Innova"
    },
    {
        id: 3,
        nombre: "Oscar Burgos",
        telefono: "666 66 666",
        email: "mihifide@gmail.com",
        empresa: "Freelance"
    }
];

//Funci√≥n contactos

function mostrarContactos() {
    const tbody = document.getElementById("tablaContactos");
    tbody.innerHTML = ""; //Buidem la taula

    agenda.forEach(contacto => {
        //Els backlash a les seg√ºents l√≠nies s√≥n importants per afegir el text i les etiquetes html.
        tbody.innerHTML += ` 
            <tr>
                <td>${contacto.nombre}</td>
                <td>${contacto.telefono}</td>
                <td>${contacto.email}</td>
                <td>${contacto.empresa}</td>
                <td>
                
                    <button class="btn btn-danger btn-sm" onclick="eliminarContacto(${contacto.id})">
                    Eliminar
                    </button>  
                </td>
            </tr>
        `;
    });
};

mostrarContactos();

//Crear contactos urgentes - unshift
function agregarUrgente() {
    const contacto = obtenerDatosFormulario();
    if (!contacto) return;

    agenda.unshift(contacto);
    limpiarFormulario();
    mostrarContactos();
};

//Crear contactos nuevos - push
function agregarContacto() {
    const contacto = obtenerDatosFormulario();
    if (!contacto) return;

    agenda.push(contacto);
    limpiarFormulario();
    mostrarContactos();
};

//Esborrar darrer contacte
function deshacerUltimo() {
    if (agenda.length === 0) return;

    agenda.pop();
    mostrarContactos();
};


//Esborrar primer contacte
function atenderPrimero() {
    if (agenda.length === 0) return;

    agenda.shift();
    mostrarContactos();
};



//Obtenir les dades del formulari
function obtenerDatosFormulario(){
    const nombre = document.getElementById("nombre").value.trim(); //Important que surti trim per treure espais extres, perqu√® no ho desi amb espais.
    const telefono = document.getElementById("telefono").value.trim();
    const email = document.getElementById("email").value.trim();
    const empresa = document.getElementById("empresa").value.trim();

    if (!nombre || !telefono || !email || !empresa) {
        alert("Todos los campos son obligatorios");
        return null; //fa el mateix que return. Posar-hi null fa que diguem de forma expl√≠cita que la funci√≥ no retorna res.
    }

    return {
        id: Date.now(),
        nombre,
        telefono,
        email,
        empresa
    }
}

  </script>
</body>

</html>
