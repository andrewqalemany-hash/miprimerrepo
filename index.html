<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Agenda de Contactos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
  <h1 class="text-center mb-4">游 Agenda de Contactos</h1>

  <!-- FORMULARIO -->
  <div class="card mb-4 shadow">
    <div class="card-body">
      <h5 class="card-title">Contacto</h5>

      <div class="row g-3">
        <div class="col-md-6">
          <input type="text" id="nombre" class="form-control" placeholder="Nombre">
        </div>
        <div class="col-md-6">
          <input type="text" id="telefono" class="form-control" placeholder="Tel칠fono">
        </div>
        <div class="col-md-6">
          <input type="email" id="email" class="form-control" placeholder="Email">
        </div>
        <div class="col-md-6">
          <input type="text" id="empresa" class="form-control" placeholder="Empresa">
        </div>
      </div>

      <div class="mt-3 d-flex gap-2 flex-wrap">
        <button class="btn btn-primary" onclick="agregarContacto()">A침adir (push)</button>
        <button class="btn btn-success" onclick="agregarUrgente()">A침adir urgente (unshift)</button>
        <button class="btn btn-warning" onclick="deshacerUltimo()">Deshacer 칰ltimo (pop)</button>
        <button class="btn btn-secondary" onclick="atenderPrimero()">Atender primero (shift)</button>
      </div>
    </div>
  </div>

  <!-- TABLA -->
  <div class="card shadow">
    <div class="card-body">
      <h5 class="card-title">Listado</h5>

      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th>Nombre</th>
            <th>Tel칠fono</th>
            <th>Email</th>
            <th>Empresa</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaContactos"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
  /********************************************************
   * PASO 1 y 2 췅 Modelo de datos + array de contactos
   ********************************************************/

  // Array 
  let agenda = [
    {
      id: 1,
      nombre: "Ana L칩pez",
      telefono: "600123123",
      email: "ana@mail.com",
      empresa: "TechSoft"
    }
  ];

  // Contador para generar IDs 칰nicos autom치ticamente
  let contadorId = 2;

  /********************************************************
   * PASO 3 췅 Mostrar contactos (READ)
   ********************************************************/

  // Funci칩n que pinta la agenda en la tabla HTML
  function mostrarContactos() {
    // Seleccionamos el cuerpo de la tabla
    const tabla = document.getElementById("tablaContactos");

    // Limpiamos la tabla para evitar duplicados
    tabla.innerHTML = "";

    // Recorremos el array agenda contacto por contacto
    agenda.forEach(contacto => {
      // A침adimos una fila por cada contacto
      tabla.innerHTML += ` 
        <tr>
          <td>${contacto.nombre}</td>
          <td>${contacto.telefono}</td>
          <td>${contacto.email}</td>
          <td>${contacto.empresa}</td>
          <td>
            <button class="btn btn-sm btn-danger"
              onclick="eliminarContacto(${contacto.id})">
              Eliminar
            </button>
          </td>
        </tr>
      `;
    });
  }

  /********************************************************
   * Funciones auxiliares (formularios)
   ********************************************************/

  // Recoge los datos escritos en el formulario
  function obtenerDatosFormulario() {
    return {
      // Asignamos un ID nuevo y lo incrementamos
      id: contadorId++,
      // Leemos el valor del input nombre
      nombre: document.getElementById("nombre").value.trim,
      // Leemos el valor del input tel칠fono
      telefono: document.getElementById("telefono").value.trim,
      // Leemos el valor del input email
      email: document.getElementById("email").value.trim,
      // Leemos el valor del input empresa
      empresa: document.getElementById("empresa").value.trim
    };
  }

  // Vac칤a los campos del formulario
  function limpiarFormulario() {
    document.getElementById("nombre").value = "";
    document.getElementById("telefono").value = "";
    document.getElementById("email").value = "";
    document.getElementById("empresa").value = "";
  }

  /********************************************************
   * PASO 4 췅 Crear contacto (CREATE con push)
   ********************************************************/

  // A침ade un contacto al final del array
  function agregarContacto() {
    // Creamos el objeto contacto con los datos del formulario
    const contacto = obtenerDatosFormulario();

    // push a침ade el contacto al final del array agenda
    agenda.push(contacto);

    // Limpiamos el formulario
    limpiarFormulario();

    // Actualizamos la tabla
    mostrarContactos();
  }

  /********************************************************
   * PASO 5 췅 Crear contacto urgente (unshift)
   ********************************************************/

  // A침ade un contacto al inicio del array
  function agregarUrgente() {
    // Creamos el objeto contacto
    const contacto = obtenerDatosFormulario();

    // unshift a침ade el contacto al principio del array
    agenda.unshift(contacto);

    // Limpiamos el formulario
    limpiarFormulario();

    // Actualizamos la tabla
    mostrarContactos();
  }

  /********************************************************
   * PASO 6 췅 Deshacer 칰ltimo contacto (pop)
   ********************************************************/

  // Elimina el 칰ltimo contacto a침adido
  function deshacerUltimo() {
    // pop elimina el 칰ltimo elemento del array
    agenda.pop();

    // Volvemos a mostrar la tabla
    mostrarContactos();
  }

  /********************************************************
   * PASO 7 췅 Atender el primer contacto (shift)
   ********************************************************/

  // Elimina el primer contacto de la agenda
  function atenderPrimero() {
    // shift elimina el primer elemento del array
    agenda.shift();

    // Actualizamos la tabla
    mostrarContactos();
  }

  /********************************************************
   * Funci칩n extra 췅 Eliminar contacto por ID
   ********************************************************/

  // Elimina un contacto concreto usando su ID
  function eliminarContacto(id) {
    // filter crea un nuevo array sin el contacto eliminado
    agenda = agenda.filter(contacto => contacto.id !== id);

    // Actualizamos la tabla
    mostrarContactos();
  }

  /********************************************************
   * Inicializaci칩n
   ********************************************************/

  // Mostramos los contactos iniciales al cargar la p치gina
  mostrarContactos();
</script>

</body>
</html>
